import React, { useEffect, useRef } from 'react';
import Plotly from 'plotly.js-dist-min';

const csvData = `Ticker,Date,Adj Close
AAPL,2023-09-21,173.04449462890625
AAPL,2023-09-22,173.90013122558594
AAPL,2023-09-25,175.18356323242188
AAPL,2023-09-26,171.0845489501953
AAPL,2023-09-27,169.56231689453125
AAPL,2023-09-28,169.82101440429688
AAPL,2023-09-29,170.33837890625
AAPL,2023-10-02,172.86541748046875
AAPL,2023-10-03,171.52230834960938
AAPL,2023-10-04,172.77589416503906
AAPL,2023-10-05,174.01953125
AAPL,2023-10-06,176.58639526367188
AAPL,2023-10-09,178.07875061035156
AAPL,2023-10-10,177.4818115234375
AAPL,2023-10-11,178.88461303710938
AAPL,2023-10-12,179.7899932861328
AAPL,2023-10-13,177.93946838378906
AAPL,2023-10-16,177.81011962890625
AAPL,2023-10-17,176.24810791015625
AAPL,2023-10-18,174.9447784423828
AAPL,2023-10-19,174.5667266845703
AAPL,2023-10-20,171.9998779296875
AAPL,2023-10-23,172.1192626953125
AAPL,2023-10-24,172.5570068359375
AAPL,2023-10-25,170.22894287109375
AAPL,2023-10-26,166.0403594970703
AAPL,2023-10-27,167.36358642578125
AAPL,2023-10-30,169.4230194091797
AAPL,2023-10-31,169.90060424804688
AAPL,2023-11-01,173.0843048095703
AAPL,2023-11-02,176.66598510742188
AAPL,2023-11-03,175.75067138671875
AAPL,2023-11-06,178.31753540039062
AAPL,2023-11-07,180.8943634033203
AAPL,2023-11-08,181.95889282226562
AAPL,2023-11-09,181.48135375976562
AAPL,2023-11-10,185.69534301757812
AAPL,2023-11-13,184.1013946533203
AAPL,2023-11-14,186.73141479492188
AAPL,2023-11-15,187.29925537109375
AAPL,2023-11-16,188.99285888671875
AAPL,2023-11-17,188.97291564941406
AAPL,2023-11-20,190.72625732421875
AAPL,2023-11-21,189.9193115234375
AAPL,2023-11-22,190.58680725097656
AAPL,2023-11-24,189.25184631347656
AAPL,2023-11-27,189.072509765625
AAPL,2023-11-28,189.68020629882812
AAPL,2023-11-29,188.65411376953125
AAPL,2023-11-30,189.23191833496094
AAPL,2023-12-01,190.51705932617188
AAPL,2023-12-04,188.71388244628906
AAPL,2023-12-05,192.68881225585938
AAPL,2023-12-06,191.5929718017578
AAPL,2023-12-07,193.53561401367188
AAPL,2023-12-08,194.9701690673828
AAPL,2023-12-11,192.44972229003906
AAPL,2023-12-12,193.9739532470703
AAPL,2023-12-13,197.21165466308594
AAPL,2023-12-14,197.361083984375
AAPL,2023-12-15,196.82313537597656
AAPL,2023-12-18,195.1494903564453
AAPL,2023-12-19,196.1955108642578
AAPL,2023-12-20,194.09349060058594
AAPL,2023-12-21,193.94403076171875
AAPL,2023-12-22,192.86814880371094
AAPL,2023-12-26,192.32020568847656
AAPL,2023-12-27,192.41983032226562
AAPL,2023-12-28,192.84820556640625
AAPL,2023-12-29,191.8021697998047
AAPL,2024-01-02,184.93821716308594
AAPL,2024-01-03,183.553466796875
AAPL,2024-01-04,181.2223358154297
AAPL,2024-01-05,180.4950714111328
AAPL,2024-01-08,184.8585205078125
AAPL,2024-01-09,184.4401092529297
AAPL,2024-01-10,185.4861602783203
AAPL,2024-01-11,184.88841247558594
AAPL,2024-01-12,185.2171630859375
AAPL,2024-01-16,182.93582153320312
AAPL,2024-01-17,181.98941040039062
AAPL,2024-01-18,187.9169158935547
AAPL,2024-01-19,190.83584594726562
AAPL,2024-01-22,193.1570281982422
AAPL,2024-01-23,194.44215393066406
AAPL,2024-01-24,193.7647247314453
AAPL,2024-01-25,193.43597412109375
AAPL,2024-01-26,191.69259643554688
AAPL,2024-01-29,191.00518798828125
AAPL,2024-01-30,187.3291473388672
AAPL,2024-01-31,183.70291137695312
AAPL,2024-02-01,186.15362548828125
AAPL,2024-02-02,185.14743041992188
AAPL,2024-02-05,186.9705047607422
AAPL,2024-02-06,188.5843963623047
AAPL,2024-02-07,188.6939697265625
AAPL,2024-02-08,187.6081085205078
AAPL,2024-02-09,188.37615966796875
AAPL,2024-02-12,186.680419921875
AAPL,2024-02-13,184.57571411132812
AAPL,2024-02-14,183.6879425048828
AAPL,2024-02-15,183.398681640625
AAPL,2024-02-16,181.85255432128906
AAPL,2024-02-20,181.1044464111328
AAPL,2024-02-21,181.862548828125
AAPL,2024-02-22,183.9073944091797
AAPL,2024-02-23,182.06204223632812
AAPL,2024-02-26,180.70545959472656
AAPL,2024-02-27,182.17176818847656
AAPL,2024-02-28,180.9647979736328
AAPL,2024-02-29,180.29647827148438
AAPL,2024-03-01,179.209228515625
AAPL,2024-03-04,174.66065979003906
AAPL,2024-03-05,169.6931610107422
AAPL,2024-03-06,168.69564819335938
AAPL,2024-03-07,168.57595825195312
AAPL,2024-03-08,170.30160522460938
AAPL,2024-03-11,172.31655883789062
AAPL,2024-03-12,172.7953338623047
AAPL,2024-03-13,170.70062255859375
AAPL,2024-03-14,172.56593322753906
AAPL,2024-03-15,172.18687438964844
AAPL,2024-03-18,173.28411865234375
AAPL,2024-03-19,175.63819885253906
AAPL,2024-03-20,178.22171020507812
AAPL,2024-03-21,170.9400177001953
AAPL,2024-03-22,171.8477325439453
AAPL,2024-03-25,170.42132568359375
AAPL,2024-03-26,169.28419494628906
AAPL,2024-03-27,172.87513732910156
AAPL,2024-03-28,171.04974365234375
AAPL,2024-04-01,169.60337829589844
AAPL,2024-04-02,168.41635131835938
AAPL,2024-04-03,169.2243194580078
AAPL,2024-04-04,168.39642333984375
AAPL,2024-04-05,169.1544952392578
AAPL,2024-04-08,168.02734375
AAPL,2024-04-09,169.24427795410156
AAPL,2024-04-10,167.35902404785156
AAPL,2024-04-11,174.60079956054688
AAPL,2024-04-12,176.10702514648438
AAPL,2024-04-15,172.25669860839844
AAPL,2024-04-16,168.95501708984375
AAPL,2024-04-17,167.57847595214844
AAPL,2024-04-18,166.62088012695312
AAPL,2024-04-19,164.58599853515625
AAPL,2024-04-22,165.4238739013672
AAPL,2024-04-23,166.48121643066406
AAPL,2024-04-24,168.59591674804688
AAPL,2024-04-25,169.46372985839844
AAPL,2024-04-26,168.87521362304688
AAPL,2024-04-29,173.06466674804688
AAPL,2024-04-30,169.9026336669922
AAPL,2024-05-01,168.87521362304688
AAPL,2024-05-02,172.59584045410156
AAPL,2024-05-03,182.9198760986328
AAPL,2024-05-06,181.25408935546875
AAPL,2024-05-07,181.94232177734375
AAPL,2024-05-08,182.281494140625
AAPL,2024-05-09,184.10690307617188
AAPL,2024-05-10,182.83836364746094
AAPL,2024-05-13,186.06463623046875
AAPL,2024-05-14,187.2133026123047
AAPL,2024-05-15,189.5006561279297
AAPL,2024-05-16,189.62051391601562
AAPL,2024-05-17,189.65048217773438
AAPL,2024-05-20,190.81912231445312
AAPL,2024-05-21,192.12762451171875
AAPL,2024-05-22,190.67929077148438
AAPL,2024-05-23,186.6639404296875
AAPL,2024-05-24,189.76034545898438
AAPL,2024-05-28,189.77035522460938
AAPL,2024-05-29,190.0699920654297
AAPL,2024-05-30,191.06883239746094
AAPL,2024-05-31,192.02772521972656
AAPL,2024-06-03,193.8056640625
AAPL,2024-06-04,194.12530517578125
AAPL,2024-06-05,195.64353942871094
AAPL,2024-06-06,194.25514221191406
AAPL,2024-06-07,196.66236877441406
AAPL,2024-06-10,192.89671325683594
AAPL,2024-06-11,206.91049194335938
AAPL,2024-06-12,212.82366943359375
AAPL,2024-06-13,213.9923095703125
AAPL,2024-06-14,212.2443389892578
AAPL,2024-06-17,216.41949462890625
AAPL,2024-06-18,214.042236328125
AAPL,2024-06-20,209.4375762939453
AAPL,2024-06-21,207.2501220703125
AAPL,2024-06-24,207.89935302734375
AAPL,2024-06-25,208.8282928466797
AAPL,2024-06-26,213.00344848632812
AAPL,2024-06-27,213.85247802734375
AAPL,2024-06-28,210.37648010253906
AAPL,2024-07-01,216.49940490722656
AAPL,2024-07-02,220.0153350830078
AAPL,2024-07-03,221.29385375976562
AAPL,2024-07-05,226.07830810546875
AAPL,2024-07-08,227.55661010742188
AAPL,2024-07-09,228.4156036376953
AAPL,2024-07-10,232.71063232421875
AAPL,2024-07-11,227.30690002441406
AAPL,2024-07-12,230.27345275878906
AAPL,2024-07-15,234.12899780273438
AAPL,2024-07-16,234.54852294921875
AAPL,2024-07-17,228.61538696289062
AAPL,2024-07-18,223.92080688476562
AAPL,2024-07-19,224.0506591796875
AAPL,2024-07-22,223.70108032226562
AAPL,2024-07-23,224.74984741210938
AAPL,2024-07-24,218.28732299804688
AAPL,2024-07-25,217.23855590820312
AAPL,2024-07-26,217.7080078125
AAPL,2024-07-29,217.98768615722656
AAPL,2024-07-30,218.5470428466797
AAPL,2024-07-31,221.8232421875
AAPL,2024-08-01,218.1075439453125
AAPL,2024-08-02,219.60580444335938
AAPL,2024-08-05,209.02806091308594
AAPL,2024-08-06,206.9904022216797
AAPL,2024-08-07,209.57742309570312
AAPL,2024-08-08,213.06338500976562
AAPL,2024-08-09,215.99000549316406
AAPL,2024-08-12,217.52999877929688
AAPL,2024-08-13,221.27000427246094
AAPL,2024-08-14,221.72000122070312
AAPL,2024-08-15,224.72000122070312
AAPL,2024-08-16,226.0500030517578
AAPL,2024-08-19,225.88999938964844
AAPL,2024-08-20,226.50999450683594
AAPL,2024-08-21,226.39999389648438
AAPL,2024-08-22,224.52999877929688
AAPL,2024-08-23,226.83999633789062
AAPL,2024-08-26,227.17999267578125
AAPL,2024-08-27,228.02999877929688
AAPL,2024-08-28,226.49000549316406
AAPL,2024-08-29,229.7899932861328
AAPL,2024-08-30,229.0
AAPL,2024-09-03,222.77000427246094
AAPL,2024-09-04,220.85000610351562
AAPL,2024-09-05,222.3800048828125
AAPL,2024-09-06,220.82000732421875
AAPL,2024-09-09,220.91000366210938
AAPL,2024-09-10,220.11000061035156
AAPL,2024-09-11,222.66000366210938
AAPL,2024-09-12,222.77000427246094
AAPL,2024-09-13,222.5
AAPL,2024-09-16,216.32000732421875
AAPL,2024-09-17,216.7899932861328
AAPL,2024-09-18,220.69000244140625
AAPL,2024-09-19,228.8699951171875
AAPL,2024-09-20,228.1999969482422
AMZN,2023-09-21,129.3300018310547
AMZN,2023-09-22,129.1199951171875
AMZN,2023-09-25,131.27000427246094
AMZN,2023-09-26,125.9800033569336
AMZN,2023-09-27,125.9800033569336
AMZN,2023-09-28,125.9800033569336
AMZN,2023-09-29,127.12000274658203
AMZN,2023-10-02,129.4600067138672
AMZN,2023-10-03,124.72000122070312
AMZN,2023-10-04,127.0
AMZN,2023-10-05,125.95999908447266
AMZN,2023-10-06,127.95999908447266
AMZN,2023-10-09,128.25999450683594
AMZN,2023-10-10,129.47999572753906
AMZN,2023-10-11,131.8300018310547
AMZN,2023-10-12,132.3300018310547
AMZN,2023-10-13,129.7899932861328
AMZN,2023-10-16,132.5500030517578
AMZN,2023-10-17,131.47000122070312
AMZN,2023-10-18,128.1300048828125
AMZN,2023-10-19,128.39999389648438
AMZN,2023-10-20,125.16999816894531
AMZN,2023-10-23,126.55999755859375
AMZN,2023-10-24,128.55999755859375
AMZN,2023-10-25,121.38999938964844
AMZN,2023-10-26,119.56999969482422
AMZN,2023-10-27,127.73999786376953
AMZN,2023-10-30,132.7100067138672
AMZN,2023-10-31,133.08999633789062
AMZN,2023-11-01,137.0
AMZN,2023-11-02,138.07000732421875
AMZN,2023-11-03,138.60000610351562
AMZN,2023-11-06,139.74000549316406
AMZN,2023-11-07,142.7100067138672
AMZN,2023-11-08,142.0800018310547
AMZN,2023-11-09,140.60000610351562
AMZN,2023-11-10,143.55999755859375
AMZN,2023-11-13,142.58999633789062
AMZN,2023-11-14,145.8000030517578
AMZN,2023-11-15,143.1999969482422
AMZN,2023-11-16,142.8300018310547
AMZN,2023-11-17,145.17999267578125
AMZN,2023-11-20,146.1300048828125
AMZN,2023-11-21,143.89999389648438
AMZN,2023-11-22,146.7100067138672
AMZN,2023-11-24,146.74000549316406
AMZN,2023-11-27,147.72999572753906
AMZN,2023-11-28,147.02999877929688
AMZN,2023-11-29,146.32000732421875
AMZN,2023-11-30,146.08999633789062
AMZN,2023-12-01,147.02999877929688
AMZN,2023-12-04,144.83999633789062
AMZN,2023-12-05,146.8800048828125
AMZN,2023-12-06,144.52000427246094
AMZN,2023-12-07,146.8800048828125
AMZN,2023-12-08,147.4199981689453
AMZN,2023-12-11,145.88999938964844
AMZN,2023-12-12,147.47999572753906
AMZN,2023-12-13,148.83999633789062
AMZN,2023-12-14,147.4199981689453
AMZN,2023-12-15,149.97000122070312
AMZN,2023-12-18,154.07000732421875
AMZN,2023-12-19,153.7899932861328
AMZN,2023-12-20,152.1199951171875
AMZN,2023-12-21,153.83999633789062
AMZN,2023-12-22,153.4199981689453
AMZN,2023-12-26,153.41000366210938
AMZN,2023-12-27,153.33999633789062
AMZN,2023-12-28,153.3800048828125
AMZN,2023-12-29,151.94000244140625
AMZN,2024-01-02,149.92999267578125
AMZN,2024-01-03,148.47000122070312
AMZN,2024-01-04,144.57000732421875
AMZN,2024-01-05,145.24000549316406
AMZN,2024-01-08,149.10000610351562
AMZN,2024-01-09,151.3699951171875
AMZN,2024-01-10,153.72999572753906
AMZN,2024-01-11,155.17999267578125
AMZN,2024-01-12,154.6199951171875
AMZN,2024-01-16,153.16000366210938
AMZN,2024-01-17,151.7100067138672
AMZN,2024-01-18,153.5
AMZN,2024-01-19,155.33999633789062
AMZN,2024-01-22,154.77999877929688
AMZN,2024-01-23,156.02000427246094
AMZN,2024-01-24,156.8699951171875
AMZN,2024-01-25,157.75
AMZN,2024-01-26,159.1199951171875
AMZN,2024-01-29,161.25999450683594
AMZN,2024-01-30,159.0
AMZN,2024-01-31,155.1999969482422
AMZN,2024-02-01,159.27999877929688
AMZN,2024-02-02,171.80999755859375
AMZN,2024-02-05,170.30999755859375
AMZN,2024-02-06,169.14999389648438
AMZN,2024-02-07,170.52999877929688
AMZN,2024-02-08,169.83999633789062
AMZN,2024-02-09,174.4499969482422
AMZN,2024-02-12,172.33999633789062
AMZN,2024-02-13,168.63999938964844
AMZN,2024-02-14,170.97999572753906
AMZN,2024-02-15,169.8000030517578
AMZN,2024-02-16,169.50999450683594
AMZN,2024-02-20,167.0800018310547
AMZN,2024-02-21,168.58999633789062
AMZN,2024-02-22,174.5800018310547
AMZN,2024-02-23,174.99000549316406
AMZN,2024-02-26,174.72999572753906
AMZN,2024-02-27,173.5399932861328
AMZN,2024-02-28,173.16000366210938
AMZN,2024-02-29,176.75999450683594
AMZN,2024-03-01,178.22000122070312
AMZN,2024-03-04,177.5800018310547
AMZN,2024-03-05,174.1199951171875
AMZN,2024-03-06,173.50999450683594
AMZN,2024-03-07,176.82000732421875
AMZN,2024-03-08,175.35000610351562
AMZN,2024-03-11,171.9600067138672
AMZN,2024-03-12,175.38999938964844
AMZN,2024-03-13,176.55999755859375
AMZN,2024-03-14,178.75
AMZN,2024-03-15,174.4199981689453
AMZN,2024-03-18,174.47999572753906
AMZN,2024-03-19,175.89999389648438
AMZN,2024-03-20,178.14999389648438
AMZN,2024-03-21,178.14999389648438
AMZN,2024-03-22,178.8699951171875
AMZN,2024-03-25,179.7100067138672
AMZN,2024-03-26,178.3000030517578
AMZN,2024-03-27,179.8300018310547
AMZN,2024-03-28,180.3800048828125
AMZN,2024-04-01,180.97000122070312
AMZN,2024-04-02,180.69000244140625
AMZN,2024-04-03,182.41000366210938
AMZN,2024-04-04,180.0
AMZN,2024-04-05,185.07000732421875
AMZN,2024-04-08,185.19000244140625
AMZN,2024-04-09,185.6699981689453
AMZN,2024-04-10,185.9499969482422
AMZN,2024-04-11,189.0500030517578
AMZN,2024-04-12,186.1300048828125
AMZN,2024-04-15,183.6199951171875
AMZN,2024-04-16,183.32000732421875
AMZN,2024-04-17,181.27999877929688
AMZN,2024-04-18,179.22000122070312
AMZN,2024-04-19,174.6300048828125
AMZN,2024-04-22,177.22999572753906
AMZN,2024-04-23,179.5399932861328
AMZN,2024-04-24,176.58999633789062
AMZN,2024-04-25,173.6699981689453
AMZN,2024-04-26,179.6199951171875
AMZN,2024-04-29,180.9600067138672
AMZN,2024-04-30,175.0
AMZN,2024-05-01,179.0
AMZN,2024-05-02,184.72000122070312
AMZN,2024-05-03,186.2100067138672
AMZN,2024-05-06,188.6999969482422
AMZN,2024-05-07,188.75999450683594
AMZN,2024-05-08,188.0
AMZN,2024-05-09,189.5
AMZN,2024-05-10,187.47999572753906
AMZN,2024-05-13,186.57000732421875
AMZN,2024-05-14,187.07000732421875
AMZN,2024-05-15,185.99000549316406
AMZN,2024-05-16,183.6300048828125
AMZN,2024-05-17,184.6999969482422
AMZN,2024-05-20,183.5399932861328
AMZN,2024-05-21,183.14999389648438
AMZN,2024-05-22,183.1300048828125
AMZN,2024-05-23,181.0500030517578
AMZN,2024-05-24,180.75
AMZN,2024-05-28,182.14999389648438
AMZN,2024-05-29,182.02000427246094
AMZN,2024-05-30,179.32000732421875
AMZN,2024-05-31,176.44000244140625
AMZN,2024-06-03,178.33999633789062
AMZN,2024-06-04,179.33999633789062
AMZN,2024-06-05,181.27999877929688
AMZN,2024-06-06,185.0
AMZN,2024-06-07,184.3000030517578
AMZN,2024-06-10,187.05999755859375
AMZN,2024-06-11,187.22999572753906
AMZN,2024-06-12,186.88999938964844
AMZN,2024-06-13,183.8300018310547
AMZN,2024-06-14,183.66000366210938
AMZN,2024-06-17,184.05999755859375
AMZN,2024-06-18,182.80999755859375
AMZN,2024-06-20,186.10000610351562
AMZN,2024-06-21,189.0800018310547
AMZN,2024-06-24,185.57000732421875
AMZN,2024-06-25,186.33999633789062
AMZN,2024-06-26,193.61000061035156
AMZN,2024-06-27,197.85000610351562
AMZN,2024-06-28,193.25
AMZN,2024-07-01,197.1999969482422
AMZN,2024-07-02,200.0
AMZN,2024-07-03,197.58999633789062
AMZN,2024-07-05,200.0
AMZN,2024-07-08,199.2899932861328
AMZN,2024-07-09,199.33999633789062
AMZN,2024-07-10,199.7899932861328
AMZN,2024-07-11,195.0500030517578
AMZN,2024-07-12,194.49000549316406
AMZN,2024-07-15,192.72000122070312
AMZN,2024-07-16,193.02000427246094
AMZN,2024-07-17,187.92999267578125
AMZN,2024-07-18,183.75
AMZN,2024-07-19,183.1300048828125
AMZN,2024-07-22,182.5500030517578
AMZN,2024-07-23,186.41000366210938
AMZN,2024-07-24,180.8300018310547
AMZN,2024-07-25,179.85000610351562
AMZN,2024-07-26,182.5
AMZN,2024-07-29,183.1999969482422
AMZN,2024-07-30,181.7100067138672
AMZN,2024-07-31,186.97999572753906
AMZN,2024-08-01,184.07000732421875
AMZN,2024-08-02,167.89999389648438
AMZN,2024-08-05,161.02000427246094
AMZN,2024-08-06,161.92999267578125
AMZN,2024-08-07,162.77000427246094
AMZN,2024-08-08,165.8000030517578
AMZN,2024-08-09,166.94000244140625
AMZN,2024-08-12,166.8000030517578
AMZN,2024-08-13,170.22999572753906
AMZN,2024-08-14,170.10000610351562
AMZN,2024-08-15,177.58999633789062
AMZN,2024-08-16,177.05999755859375
AMZN,2024-08-19,178.22000122070312
AMZN,2024-08-20,178.8800048828125
AMZN,2024-08-21,180.11000061035156
AMZN,2024-08-22,176.1300048828125
AMZN,2024-08-23,177.0399932861328
AMZN,2024-08-26,175.5
AMZN,2024-08-27,173.1199951171875
AMZN,2024-08-28,170.8000030517578
AMZN,2024-08-29,172.1199951171875
AMZN,2024-08-30,178.5
AMZN,2024-09-03,176.25
AMZN,2024-09-04,173.3300018310547
AMZN,2024-09-05,177.88999938964844
AMZN,2024-09-06,171.38999938964844
AMZN,2024-09-09,175.39999389648438
AMZN,2024-09-10,179.5500030517578
AMZN,2024-09-11,184.52000427246094
AMZN,2024-09-12,187.0
AMZN,2024-09-13,186.49000549316406
AMZN,2024-09-16,184.88999938964844
AMZN,2024-09-17,186.8800048828125
AMZN,2024-09-18,186.42999267578125
AMZN,2024-09-19,189.8699951171875
AMZN,2024-09-20,191.60000610351562
TSLA,2023-09-21,255.70999145507812
TSLA,2023-09-22,244.8800048828125
TSLA,2023-09-25,246.99000549316406
TSLA,2023-09-26,240.50999450683594
TSLA,2023-09-27,240.0500030517578
TSLA,2023-09-28,242.6699981689453
TSLA,2023-09-29,250.22000122070312
TSLA,2023-10-02,251.60000610351562
TSLA,2023-10-03,246.52999877929688
TSLA,2023-10-04,261.1600036621094
TSLA,2023-10-05,260.04998779296875
TSLA,2023-10-06,260.5299987792969
TSLA,2023-10-09,259.6700134277344
TSLA,2023-10-10,262.9900207519531
TSLA,2023-10-11,262.989990234375
TSLA,2023-10-12,258.8699951171875
TSLA,2023-10-13,251.1199951171875
TSLA,2023-10-16,257.5
TSLA,2023-10-17,259.2900085449219
TSLA,2023-10-18,242.67999267578125
TSLA,2023-10-19,220.11000061035156
TSLA,2023-10-20,211.99000549316406
TSLA,2023-10-23,212.08999633789062
TSLA,2023-10-24,225.39999389648438
TSLA,2023-10-25,217.66000366210938
TSLA,2023-10-26,205.75999450683594
TSLA,2023-10-27,207.30999755859375
TSLA,2023-10-30,197.36000061035156
TSLA,2023-10-31,200.8400115966797
TSLA,2023-11-01,205.66000366210938
TSLA,2023-11-02,214.6300048828125
TSLA,2023-11-03,219.9600067138672
TSLA,2023-11-06,219.8699951171875
TSLA,2023-11-07,221.99000549316406
TSLA,2023-11-08,222.1199951171875
TSLA,2023-11-09,214.64999389648438
TSLA,2023-11-10,214.41000366210938
TSLA,2023-11-13,223.17999267578125
TSLA,2023-11-14,232.3699951171875
TSLA,2023-11-15,242.67999267578125
TSLA,2023-11-16,234.86000061035156
TSLA,2023-11-17,234.85000610351562
TSLA,2023-11-20,238.8300018310547
TSLA,2023-11-21,241.19000244140625
TSLA,2023-11-22,234.14999389648438
TSLA,2023-11-24,235.4499969482422
TSLA,2023-11-27,233.1999969482422
TSLA,2023-11-28,239.2899932861328
TSLA,2023-11-29,244.17999267578125
TSLA,2023-11-30,240.0800018310547
TSLA,2023-12-01,238.82000732421875
TSLA,2023-12-04,238.72000122070312
TSLA,2023-12-05,239.2899932861328
TSLA,2023-12-06,239.4499969482422
TSLA,2023-12-07,242.14999389648438
TSLA,2023-12-08,243.8300018310547
TSLA,2023-12-11,238.44000244140625
TSLA,2023-12-12,237.01998901367188
TSLA,2023-12-13,239.2899932861328
TSLA,2023-12-14,251.05999755859375
TSLA,2023-12-15,253.5
TSLA,2023-12-18,253.9199981689453
TSLA,2023-12-19,257.1199951171875
TSLA,2023-12-20,254.5
TSLA,2023-12-21,254.5500030517578
TSLA,2023-12-22,265.2200012207031
TSLA,2023-12-26,261.4700012207031
TSLA,2023-12-27,261.4700012207031
TSLA,2023-12-28,255.0399932861328
TSLA,2023-12-29,248.4800109863281
TSLA,2024-01-02,245.17999267578125
TSLA,2024-01-03,241.1999969482422
TSLA,2024-01-04,237.93000793457031
TSLA,2024-01-05,237.49000549316406
TSLA,2024-01-08,233.9400177001953
TSLA,2024-01-09,233.9400177001953
TSLA,2024-01-10,231.05999755859375
TSLA,2024-01-11,226.5500030517578
TSLA,2024-01-12,222.1999969482422
TSLA,2024-01-16,214.17999267578125
TSLA,2024-01-17,212.19000244140625
TSLA,2024-01-18,212.1999969482422
TSLA,2024-01-19,211.8800048828125
TSLA,2024-01-22,209.60000610351562
TSLA,2024-01-23,207.83999633789062
TSLA,2024-01-24,208.00999450683594
TSLA,2024-01-25,183.25
TSLA,2024-01-26,188.86000061035156
TSLA,2024-01-29,191.99000549316406
TSLA,2024-01-30,191.58999633789062
TSLA,2024-01-31,187.2899932861328
TSLA,2024-02-01,188.86000061035156
TSLA,2024-02-02,187.8800048828125
TSLA,2024-02-05,188.0500030517578
TSLA,2024-02-06,184.6300048828125
TSLA,2024-02-07,186.75999450683594
TSLA,2024-02-08,189.99000549316406
TSLA,2024-02-09,193.5700225830078
TSLA,2024-02-12,193.0800018310547
TSLA,2024-02-13,189.9600067138672
TSLA,2024-02-14,189.6199951171875
TSLA,2024-02-15,189.41000366210938
TSLA,2024-02-16,193.0
TSLA,2024-02-20,191.99000549316406
TSLA,2024-02-21,191.5399932861328
TSLA,2024-02-22,196.8300018310547
TSLA,2024-02-23,201.8800048828125
TSLA,2024-02-26,202.6300048828125
TSLA,2024-02-27,201.85000610351562
TSLA,2024-02-28,202.63999938964844
TSLA,2024-02-29,203.0399932861328
TSLA,2024-03-01,202.63999938964844
TSLA,2024-03-04,178.97000122070312
TSLA,2024-03-05,177.67999267578125
TSLA,2024-03-06,176.5399932861328
TSLA,2024-03-07,175.5399932861328
TSLA,2024-03-08,175.3000030517578
TSLA,2024-03-11,172.9600067138672
TSLA,2024-03-12,179.8699951171875
TSLA,2024-03-13,174.1999969482422
TSLA,2024-03-14,170.17999267578125
TSLA,2024-03-15,164.9199981689453
TSLA,2024-03-18,163.3800048828125
TSLA,2024-03-19,166.0
TSLA,2024-03-20,169.4199981689453
TSLA,2024-03-21,172.39999389648438
TSLA,2024-03-22,170.8300018310547
TSLA,2024-03-25,175.32000732421875
TSLA,2024-03-26,173.0500030517578
TSLA,2024-03-27,174.1300048828125
TSLA,2024-03-28,175.17999267578125
TSLA,2024-04-01,166.3300018310547
TSLA,2024-04-02,166.3300018310547
TSLA,2024-04-03,164.39999389648438
TSLA,2024-04-04,162.75
TSLA,2024-04-05,164.89999389648438
TSLA,2024-04-08,169.0500030517578
TSLA,2024-04-09,171.9600067138672
TSLA,2024-04-10,168.3000030517578
TSLA,2024-04-11,172.63999938964844
TSLA,2024-04-12,171.05999755859375
TSLA,2024-04-15,161.47000122070312
TSLA,2024-04-16,157.11000061035156
TSLA,2024-04-17,153.1999969482422
TSLA,2024-04-18,149.9199981689453
TSLA,2024-04-19,147.0500030517578
TSLA,2024-04-22,142.05999755859375
TSLA,2024-04-23,134.47999572753906
TSLA,2024-04-24,168.2100067138672
TSLA,2024-04-25,168.27999877929688
TSLA,2024-04-26,168.27999877929688
TSLA,2024-04-29,193.0
TSLA,2024-04-30,184.85000610351562
TSLA,2024-05-01,186.1199951171875
TSLA,2024-05-02,186.8000030517578
TSLA,2024-05-03,183.5399932861328
TSLA,2024-05-06,179.5800018310547
TSLA,2024-05-07,171.0800018310547
TSLA,2024-05-08,171.9600067138672
TSLA,2024-05-09,171.7899932861328
TSLA,2024-05-10,167.1999969482422
TSLA,2024-05-13,166.3699951171875
TSLA,2024-05-14,171.0800018310547
TSLA,2024-05-15,173.86000061035156
TSLA,2024-05-16,176.1999969482422
TSLA,2024-05-17,180.1300048828125
TSLA,2024-05-20,182.16000366210938
TSLA,2024-05-21,181.4199981689453
TSLA,2024-05-22,182.9600067138672
TSLA,2024-05-23,184.47000122070312
TSLA,2024-05-24,193.1699981689453
TSLA,2024-05-28,201.1699981689453
TSLA,2024-05-29,203.9300079345703
TSLA,2024-05-30,207.47999572753906
TSLA,2024-05-31,213.9700012207031
TSLA,2024-06-03,217.60000610351562
TSLA,2024-06-04,224.57000732421875
TSLA,2024-06-05,231.1999969482422
TSLA,2024-06-06,234.8600006103516
TSLA,2024-06-07,244.39999389648438
TSLA,2024-06-10,249.8300018310547
TSLA,2024-06-11,259.32000732421875
TSLA,2024-06-12,256.1000061035156
TSLA,2024-06-13,255.8800048828125
TSLA,2024-06-14,260.5400085449219
TSLA,2024-06-17,274.4499969482422
TSLA,2024-06-18,271.989990234375
TSLA,2024-06-20,264.6099853515625
TSLA,2024-06-21,260.0199890136719
TSLA,2024-06-24,241.05000305175781
TSLA,2024-06-25,239.7899932861328
TSLA,2024-06-26,256.7900085449219
TSLA,2024-06-27,261.7699890136719
TSLA,2024-06-28,256.6000061035156
TSLA,2024-07-01,279.8200073242188
TSLA,2024-07-02,283.0799865722656
TSLA,2024-07-03,290.3800048828125
TSLA,2024-07-05,274.42999267578125
TSLA,2024-07-08,269.6099853515625
TSLA,2024-07-09,269.79998779296875
TSLA,2024-07-10,271.989990234375
TSLA,2024-07-11,264.3500061035156
TSLA,2024-07-12,281.3800048828125
TSLA,2024-07-15,290.3800048828125
TSLA,2024-07-16,293.3399963378906
TSLA,2024-07-17,292.0400085449219
TSLA,2024-07-18,277.8999938964844
TSLA,2024-07-19,260.0199890136719
TSLA,2024-07-22,268.4300231933594
TSLA,2024-07-23,265.2799987792969
TSLA,2024-07-24,264.3500061035156
TSLA,2024-07-25,255.70999145507812
TSLA,2024-07-26,255.70999145507812
TSLA,2024-07-29,266.4400024414062
TSLA,2024-07-30,266.5400085449219
TSLA,2024-07-31,274.42999267578125
TSLA,2024-08-01,262.9000244140625
TSLA,2024-08-02,259.4599914550781
TSLA,2024-08-05,246.4499969482422
TSLA,2024-08-06,248.5
TSLA,2024-08-07,242.1999969482422
TSLA,2024-08-08,242.6999969482422
TSLA,2024-08-09,242.6999969482422
TSLA,2024-08-12,241.0500030517578
TSLA,2024-08-13,248.3000030517578
TSLA,2024-08-14,246.72000122070312
TSLA,2024-08-15,245.0
TSLA,2024-08-16,241.72999572753906
TSLA,2024-08-19,239.75999450683594
TSLA,2024-08-20,239.75999450683594
TSLA,2024-08-21,232.9600067138672
TSLA,2024-08-22,233.1999969482422
TSLA,2024-08-23,238.5899963378906
TSLA,2024-08-26,238.82000732421875
TSLA,2024-08-27,258.0799865722656
TSLA,2024-08-28,256.89999389648438
TSLA,2024-08-29,261.1000061035156
TSLA,2024-08-30,256.89999389648438
TSLA,2024-09-03,256.4900207519531
TSLA,2024-09-04,251.9199981689453
TSLA,2024-09-05,251.49000549316406
TSLA,2024-09-06,248.5
TSLA,2024-09-09,273.0799865722656
TSLA,2024-09-10,267.4800109863281
TSLA,2024-09-11,271.29998779296875
TSLA,2024-09-12,273.0799865722656
TSLA,2024-09-13,274.3900146484375
TSLA,2024-09-16,265.2799987792969
TSLA,2024-09-17,266.5400085449219
TSLA,2024-09-18,262.59002685546875
TSLA,2024-09-19,243.9199981689453
TSLA,2024-09-20,238.25
NVDA,2023-09-21,417.7900085449219
NVDA,2023-09-22,416.1000061035156
NVDA,2023-09-25,430.8999938964844
NVDA,2023-09-26,435.20001220703125
NVDA,2023-09-27,435.20001220703125
NVDA,2023-09-28,435.20001220703125
NVDA,2023-09-29,434.9599914550781
NVDA,2023-10-02,457.2799987792969
NVDA,2023-10-03,450.0799865722656
NVDA,2023-10-04,454.8500061035156
NVDA,2023-10-05,456.1700134277344
NVDA,2023-10-06,458.1700134277344
NVDA,2023-10-09,468.1700134277344
NVDA,2023-10-10,470.3500061035156
NVDA,2023-10-11,477.7699890136719
NVDA,2023-10-12,469.29998779296875
NVDA,2023-10-13,450.0799865722656
NVDA,2023-10-16,454.8500061035156
NVDA,2023-10-17,456.1700134277344
NVDA,2023-10-18,421.1700134277344
NVDA,2023-10-19,417.7900085449219
NVDA,2023-10-20,407.8999938964844
NVDA,2023-10-23,405.0400085449219
NVDA,2023-10-24,424.6700134277344
NVDA,2023-10-25,417.4800109863281
NVDA,2023-10-26,403.2699890136719
NVDA,2023-10-27,405.0400085449219
NVDA,2023-10-30,425.7900085449219
NVDA,2023-10-31,435.20001220703125
NVDA,2023-11-01,450.0799865722656
NVDA,2023-11-02,469.29998779296875
NVDA,2023-11-03,483.3500061035156
NVDA,2023-11-06,492.2400207519531
NVDA,2023-11-07,496.1700134277344
NVDA,2023-11-08,486.20001220703125
NVDA,2023-11-09,483.3500061035156
NVDA,2023-11-10,492.2400207519531
NVDA,2023-11-13,496.1700134277344
NVDA,2023-11-14,496.1700134277344
NVDA,2023-11-15,496.1700134277344
NVDA,2023-11-16,494.7400207519531
NVDA,2023-11-17,492.9800109863281
NVDA,2023-11-20,504.5899963378906
NVDA,2023-11-21,504.5899963378906
NVDA,2023-11-22,504.5899963378906
NVDA,2023-11-24,477.7699890136719
NVDA,2023-11-27,477.7699890136719
NVDA,2023-11-28,477.7699890136719
NVDA,2023-11-29,477.7699890136719
NVDA,2023-11-30,467.6499938964844
NVDA,2023-12-01,467.6499938964844
NVDA,2023-12-04,465.1700134277344
NVDA,2023-12-05,465.1700134277344
NVDA,2023-12-06,465.1700134277344
NVDA,2023-12-07,465.1700134277344
NVDA,2023-12-08,465.1700134277344
NVDA,2023-12-11,465.1700134277344
NVDA,2023-12-12,465.1700134277344
NVDA,2023-12-13,465.1700134277344
NVDA,2023-12-14,465.1700134277344
NVDA,2023-12-15,488.8800048828125
NVDA,2023-12-18,488.8800048828125
NVDA,2023-12-19,488.8800048828125
NVDA,2023-12-20,488.8800048828125
NVDA,2023-12-21,488.8800048828125
NVDA,2023-12-22,488.8800048828125
NVDA,2023-12-26,488.8800048828125
NVDA,2023-12-27,488.8800048828125
NVDA,2023-12-28,488.8800048828125
NVDA,2023-12-29,495.4100036621094
NVDA,2024-01-02,495.4100036621094
NVDA,2024-01-03,495.4100036621094
NVDA,2024-01-04,495.4100036621094
NVDA,2024-01-05,495.4100036621094
NVDA,2024-01-08,522.530029296875
NVDA,2024-01-09,522.530029296875
NVDA,2024-01-10,522.530029296875
NVDA,2024-01-11,522.530029296875
NVDA,2024-01-12,522.530029296875
NVDA,2024-01-16,547.1099853515625
NVDA,2024-01-17,547.1099853515625
NVDA,2024-01-18,547.1099853515625
NVDA,2024-01-19,594.8900146484375
NVDA,2024-01-22,594.8900146484375
NVDA,2024-01-23,594.8900146484375
NVDA,2024-01-24,594.8900146484375
NVDA,2024-01-25,594.8900146484375
NVDA,2024-01-26,594.8900146484375
NVDA,2024-01-29,627.3699951171875
NVDA,2024-01-30,627.3699951171875
NVDA,2024-01-31,627.3699951171875
NVDA,2024-02-01,627.3699951171875
NVDA,2024-02-02,661.6099853515625
NVDA,2024-02-05,661.6099853515625
NVDA,2024-02-06,661.6099853515625
NVDA,2024-02-07,661.6099853515625
NVDA,2024-02-08,661.6099853515625
NVDA,2024-02-09,726.8800048828125
NVDA,2024-02-12,726.8800048828125
NVDA,2024-02-13,726.8800048828125
NVDA,2024-02-14,726.8800048828125
NVDA,2024-02-15,726.8800048828125
NVDA,2024-02-16,726.8800048828125
NVDA,2024-02-20,694.4000244140625
NVDA,2024-02-21,694.4000244140625
NVDA,2024-02-22,785.3800048828125
NVDA,2024-02-23,788.1699829101562
NVDA,2024-02-26,791.0
NVDA,2024-02-27,791.0
NVDA,2024-02-28,791.0
NVDA,2024-02-29,790.9000244140625
NVDA,2024-03-01,822.7999877929688
NVDA,2024-03-04,822.7999877929688
NVDA,2024-03-05,822.7999877929688
NVDA,2024-03-06,822.7999877929688
NVDA,2024-03-07,927.7000122070312
NVDA,2024-03-08,927.7000122070312
NVDA,2024-03-11,927.7000122070312
NVDA,2024-03-12,927.7000122070312
NVDA,2024-03-13,927.7000122070312
NVDA,2024-03-14,927.7000122070312
NVDA,2024-03-15,878.4000244140625
NVDA,2024-03-18,878.4000244140625
NVDA,2024-03-19,878.4000244140625
NVDA,2024-03-20,878.4000244140625
NVDA,2024-03-21,878.4000244140625
NVDA,2024-03-22,878.4000244140625
NVDA,2024-03-25,878.4000244140625
NVDA,2024-03-26,878.4000244140625
NVDA,2024-03-27,878.4000244140625
NVDA,2024-03-28,925.0999755859375
NVDA,2024-04-01,925.0999755859375
NVDA,2024-04-02,925.0999755859375
NVDA,2024-04-03,925.0999755859375
NVDA,2024-04-04,925.0999755859375
NVDA,2024-04-05,925.0999755859375
NVDA,2024-04-08,870.7000122070312
NVDA,2024-04-09,870.7000122070312
NVDA,2024-04-10,870.7000122070312
NVDA,2024-04-11,870.7000122070312
NVDA,2024-04-12,870.7000122070312
NVDA,2024-04-15,870.7000122070312
NVDA,2024-04-16,870.7000122070312
NVDA,2024-04-17,870.7000122070312
NVDA,2024-04-18,870.7000122070312
NVDA,2024-04-19,762.0
NVDA,2024-04-22,762.0
NVDA,2024-04-23,762.0
NVDA,2024-04-24,762.0
NVDA,2024-04-25,762.0
NVDA,2024-04-26,877.0999755859375
NVDA,2024-04-29,877.0999755859375
NVDA,2024-04-30,877.0999755859375
NVDA,2024-05-01,877.0999755859375
NVDA,2024-05-02,877.0999755859375
NVDA,2024-05-03,877.0999755859375
NVDA,2024-05-06,877.0999755859375
NVDA,2024-05-07,877.0999755859375
NVDA,2024-05-08,877.0999755859375
NVDA,2024-05-09,877.0999755859375
NVDA,2024-05-10,877.0999755859375
NVDA,2024-05-13,877.0999755859375
NVDA,2024-05-14,877.0999755859375
NVDA,2024-05-15,877.0999755859375
NVDA,2024-05-16,877.0999755859375
NVDA,2024-05-17,877.0999755859375
NVDA,2024-05-20,877.0999755859375
NVDA,2024-05-21,877.0999755859375
NVDA,2024-05-22,877.0999755859375
NVDA,2024-05-23,877.0999755859375
NVDA,2024-05-24,989.0999755859375
NVDA,2024-05-28,989.0999755859375
NVDA,2024-05-29,989.0999755859375
NVDA,2024-05-30,989.0999755859375
NVDA,2024-05-31,989.0999755859375
NVDA,2024-06-03,989.0999755859375
NVDA,2024-06-04,989.0999755859375
NVDA,2024-06-05,989.0999755859375
NVDA,2024-06-06,989.0999755859375
NVDA,2024-06-07,989.0999755859375
NVDA,2024-06-10,989.0999755859375
NVDA,2024-06-11,989.0999755859375
NVDA,2024-06-12,989.0999755859375
NVDA,2024-06-13,989.0999755859375
NVDA,2024-06-14,989.0999755859375
NVDA,2024-06-17,989.0999755859375
NVDA,2024-06-18,989.0999755859375
NVDA,2024-06-20,989.0999755859375
NVDA,2024-06-21,989.0999755859375
NVDA,2024-06-24,989.0999755859375
NVDA,2024-06-25,989.0999755859375
NVDA,2024-06-26,989.0999755859375
NVDA,2024-06-27,989.0999755859375
NVDA,2024-06-28,989.0999755859375
NVDA,2024-07-01,989.0999755859375
NVDA,2024-07-02,989.0999755859375
NVDA,2024-07-03,989.0999755859375
NVDA,2024-07-05,989.0999755859375
NVDA,2024-07-08,989.0999755859375
NVDA,2024-07-09,989.0999755859375
NVDA,2024-07-10,989.0999755859375
NVDA,2024-07-11,989.0999755859375
NVDA,2024-07-12,989.0999755859375
NVDA,2024-07-15,989.0999755859375
NVDA,2024-07-16,989.0999755859375
NVDA,2024-07-17,989.0999755859375
NVDA,2024-07-18,989.0999755859375
NVDA,2024-07-19,989.0999755859375
NVDA,2024-07-22,989.0999755859375
NVDA,2024-07-23,989.0999755859375
NVDA,2024-07-24,989.0999755859375
NVDA,2024-07-25,989.0999755859375
NVDA,2024-07-26,989.0999755859375
NVDA,2024-07-29,989.0999755859375
NVDA,2024-07-30,989.0999755859375
NVDA,2024-07-31,989.0999755859375
NVDA,2024-08-01,989.0999755859375
NVDA,2024-08-02,989.0999755859375
NVDA,2024-08-05,989.0999755859375
NVDA,2024-08-06,989.0999755859375
NVDA,2024-08-07,989.0999755859375
NVDA,2024-08-08,989.0999755859375
NVDA,2024-08-09,989.0999755859375
NVDA,2024-08-12,989.0999755859375
NVDA,2024-08-13,989.0999755859375
NVDA,2024-08-14,989.0999755859375
NVDA,2024-08-15,989.0999755859375
NVDA,2024-08-16,989.0999755859375
NVDA,2024-08-19,989.0999755859375
NVDA,2024-08-20,989.0999755859375
NVDA,2024-08-21,989.0999755859375
NVDA,2024-08-22,989.0999755859375
NVDA,2024-08-23,989.0999755859375
NVDA,2024-08-26,989.0999755859375
NVDA,2024-08-27,989.0999755859375
NVDA,2024-08-28,989.0999755859375
NVDA,2024-08-29,989.0999755859375
NVDA,2024-08-30,989.0999755859375
NVDA,2024-09-03,989.0999755859375
NVDA,2024-09-04,989.0999755859375
NVDA,2024-09-05,989.0999755859375
NVDA,2024-09-06,989.0999755859375
NVDA,2024-09-09,989.0999755859375
NVDA,2024-09-10,989.0999755859375
NVDA,2024-09-11,989.0999755859375
NVDA,2024-09-12,989.0999755859375
NVDA,2024-09-13,989.0999755859375
NVDA,2024-09-16,989.0999755859375
NVDA,2024-09-17,989.0999755859375
NVDA,2024-09-18,989.0999755859375
NVDA,2024-09-19,989.0999755859375
NVDA,2024-09-20,989.0999755859375`;

const parseCSV = (csv) => {
  const lines = csv.split('\n');
  const data = {};

  lines.slice(1).forEach(line => {
    const [ticker, date, price] = line.split(',');
    if (!data[ticker]) {
      data[ticker] = [];
    }
    data[ticker].push({ date, price: parseFloat(price) });
  });

  return data;
};

const calculateCombinedGrowth = (stockData) => {
  const companies = Object.keys(stockData);
  const dates = stockData[companies[0]].map(d => d.date);

  return dates.map((date, index) => {
    const avgPrice = companies.reduce((sum, company) => {
      return sum + stockData[company][index].price;
    }, 0) / companies.length;

    return { date, price: avgPrice };
  });
};

const StockChart = () => {
  const chartRef = useRef(null);

  useEffect(() => {
    if (chartRef.current) {
      const stockData = parseCSV(csvData);
      const companies = ['AMZN', 'AAPL', 'TSLA', 'NVDA'];
      const colors = ['#FF9900', '#A2AAAD', '#CC0000', '#76B900'];

      const traces = companies.map((company, index) => ({
        x: stockData[company].map(d => d.date),
        y: stockData[company].map(d => d.price),
        type: 'scatter',
        mode: 'lines',
        name: company,
        line: { color: colors[index], width: 2 },
      }));

      const combinedGrowth = calculateCombinedGrowth(stockData);
      traces.push({
        x: combinedGrowth.map(d => d.date),
        y: combinedGrowth.map(d => d.price),
        type: 'scatter',
        mode: 'lines',
        name: 'Combined Growth',
        line: { color: '#000000', width: 4 },
      });

      const layout = {
        title: 'AMZN, AAPL, TSLA, NVDA, and Combined Growth',
        xaxis: {
          title: 'Date',
          rangeslider: { visible: false },
          tickformat: '%Y-%m-%d',
        },
        yaxis: { title: 'Price (USD)' },
        legend: { orientation: 'h', y: -0.2 },
        autosize: true,
        margin: { l: 50, r: 20, t: 40, b: 40 },
        hovermode: 'closest',
      };

      const config = { responsive: true };

      Plotly.newPlot(chartRef.current, traces, layout, config);
    }
  }, []);

  return (
    <div className="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4">
      <div className="bg-white rounded-lg shadow-lg p-6 w-full max-w-6xl">
        <h1 className="text-2xl font-bold text-gray-800 mb-4">
          Stock Price Comparison
        </h1>
        <div 
          ref={chartRef} 
          className="w-full h-[600px]" 
          aria-label="Interactive chart comparing Amazon, Apple, Tesla, NVIDIA stock prices, and their Combined Growth over time"
        />
      </div>
    </div>
  );
};

export default StockChart;